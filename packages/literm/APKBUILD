maintainer="Mitchell Scott <mitchell@scottlabs.io>"
pkgname=literm
pkgver=0.1.5
pkgrel=0
_upstream_author="asivery"
_category="apps"
pkgdesc="Terminal emulator for reMarkable Paper Pro using QtQuick"
url="https://github.com/asivery/rm-literm"
arch="aarch64 armv7"
license="GPL-2.0"
depends="qt-resource-rebuilder remarkable-os>=3.24 remarkable-os<3.25"
options="!check !fhs !strip !tracedeps"

_release="v$pkgver"

source="
$pkgname-$pkgver-aarch64.so::https://github.com/asivery/rm-literm/releases/download/$_release/literm-aarch64.so
$pkgname-$pkgver-armv7.so::https://github.com/asivery/rm-literm/releases/download/$_release/literm-arm32.so
COPYING::https://raw.githubusercontent.com/asivery/rm-literm/master/COPYING
"

sha512sums="
ae46394d5c59dc9f44ccef7e6524eab6e782a792c35ae6a7171c5b36ff2072b6d96d2f4840650f725e52eb2959c003c2135c74fc8dfb1ca9a503e2706ac47db6  literm-0.1.5-aarch64.so
70ec7a6e5c6656c6797c24040fca1a34a12d81e1ab5497ff56eec40f0d2927ef781c033ba4eb1965b8db21d1733aed33ff6e3ccb1c5104d588aee6c2899741a5  literm-0.1.5-armv7.so
aee80b1f9f7f4a8a00dcf6e6ce6c41988dcaedc4de19d9d04460cbfb05d99829ffe8f9d038468eabbfba4d65b38e8dbef5ecf5eb8a1b891d9839cda6c48ee957  COPYING
"

package() {
	case "$CARCH" in
		aarch64) _so="$pkgname-$pkgver-aarch64.so" ;;
		armv7|armhf) _so="$pkgname-$pkgver-armv7.so" ;;
	esac

	install -Dm755 "$srcdir/$_so" \
		"$pkgdir/home/root/xovi/extensions.d/$pkgname.so"

	mkdir -p "$pkgdir/home/root/.vellum/licenses/$pkgname"
	install -Dm644 "$srcdir/COPYING" \
		"$pkgdir/home/root/.vellum/licenses/$pkgname/COPYING"
	echo "https://github.com/asivery/rm-literm/archive/$_release.tar.gz" > \
		"$pkgdir/home/root/.vellum/licenses/$pkgname/SOURCES"
}
