# Maintainer: Mitchell Scott <mitchell@scottlabs.io>
pkgname=fix-battery-indicator
pkgver=1.0.0
pkgrel=0
_author="rmitchellscott"
_author_url="https://github.com/rmitchellscott"
pkgdesc="Fixes a bug introduced in 3.24 with the main navigator battery icon not updating to the correct number of bars after charging while the device is asleep."
url="https://github.com/rmitchellscott/xovi-qmd-extensions"
arch="noarch"
license="MIT"
depends="xovi-qt-resource-rebuilder remarkable-os>=3.24"
source="
fixBatteryIndicator.qmd::https://raw.githubusercontent.com/rmitchellscott/xovi-qmd-extensions/main/3.24/fixBatteryIndicator.qmd
LICENSE::https://raw.githubusercontent.com/rmitchellscott/xovi-qmd-extensions/main/LICENSE
"
options="!check !fhs"
sha512sums="
4e93d9064109f1e67ef721ac4e6349c59864076f6da409f018df0eb806c4a077509fc0ac44aa2ec6a84c9caac36ea5baa718eca12c4f19ea2bee3518eb54daca
SKIP
"

package() {
    install -Dm644 "$srcdir/fixBatteryIndicator.qmd" \
        "$pkgdir/home/root/xovi/exthome/qt-resource-rebuilder/fixBatteryIndicator.qmd"

    mkdir -p "$pkgdir/home/root/.vellum/licenses/$pkgname"
    install -Dm644 "$srcdir/LICENSE" \
        "$pkgdir/home/root/.vellum/licenses/$pkgname/LICENSE"
    echo "https://github.com/rmitchellscott/xovi-qmd-extensions" > \
        "$pkgdir/home/root/.vellum/licenses/$pkgname/SOURCES"
}
